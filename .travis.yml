language: R
cache:
  packages: true
  directories:
    - _bookdown_files

pandoc_version: 2.3.1

repos:
  CRAN: https://cloud.r-project.org
  ropensci: http://packages.ropensci.org

addons:
  apt:
    sources:
      - sourceline: 'ppa:ubuntugis/ppa'
    packages:
      - optipng
      - ghostscript
      - libudunits2-dev
      - libgdal-dev
      - libgeos-dev
      - libproj-dev

before_script:
  - tlmgr install index
  - cp book/springer/* ./

script:
  - Rscript -e 'bookdown::render_book("index.rmd")'

after_script:
  - Rscript -e 'bookdown::render_book("index.rmd", "bookdown::pdf_book")'
